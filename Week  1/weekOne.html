<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Social</title>
</head>
<body>
    
    <h1>Simple Frontend</h1>

    <!-- form -->
    <form>

    <label for="words">Your Post:</label><br>
    <input type="text" id="words" name="words"><br>

    </form>

    <!-- post button that works in tandem with the form -->
    <button id="post-button">post</button>

    <br>

    <!-- displaying recent posts -->
    <h3>Recent Posts</h3>

    <ul id="recent-posts">


    </ul>


    <script scr="main.js">

       console.log("frontend functioning")

        // Get the current date and time
        const currentDate = new Date();

        // Get hours, minutes, and seconds
        const hours = currentDate.getHours();
        const minutes = currentDate.getMinutes();
        const seconds = currentDate.getSeconds();

        // Format the time as HH:MM:SS
        const formattedTime = `${hours}:${minutes}:${seconds}`

    


       // creating a variable for userID's
       const userId = 1
       // this value will be used as a our userID
       let nextPostId = 0
       // creating an array that stores all recent posts
       let recentPosts = []


        // creating an element postwords in js that is linked
        // to a html element with the id 'words'
        // adding an event listener to listen for when the enter key is pressed
        // creating a function that will print what was written in the
        // html form to the console, to stop the text from refreshing the moment its
        // posted the preventDefault() is added

        let postWords = document.getElementById('words')

        // creating a variable that is linked to the post button
        let postButton = document.querySelector('#post-button')

        // creating a variable linked to the unordered list
        let recentPostList = document.querySelector('#recent-posts')


        // event listener are used to add functionality when a certain event takes place
        postWords.addEventListener('keypress', processKeys)
        // postWords.addEventListener('input', postChange)
        postButton.addEventListener('click', processPostButton)

        // this function listens out for when the enter key is pressed
        // when it has been pressed then the values from the form will be
        // printed to the console. - a new function has been created
        // so that when enter is pressed the value of the form is passed to createPost
        function processKeys(event) {

            if(event.key === "Enter" || event.which === 13) {

            // console.log(event.target.value)
            createPost(event.target.value)
            event.preventDefault()

            }

        }

        // once thee button is clicked then the value of the form is
        // printed to the console - a new function has been created
        // so that when the button is clicked the value of the form is passed to createPost
        function processPostButton(event){

            // console.log(postWords.value)
            createPost(postWords.value)

        }

        // keep track of each key pressed and logging it to the console
        // function postChange (event) {

        //     console.log(event.target.value)

        // }

        //
        function createPost(postText) {

            //create an empty js object, anything after post. is value
            // that will be added to the object (populating)
            let post = {

                content: postText,
                // the postId will increase each post
                postId: nextPostId++,
                timePosted: formattedTime,
                user: userId
            }

            // post.content = postText
            // post.id = 0
            // post.timePosted = 0
            // post.user = 0 

            postWords.value = ''
            console.log(post)
            // this line of code adds any new posts to the array the start of the array (adds them)
            recentPosts.unshift(post)
            console.log(recentPosts)
            updatePostList()

        }


        // this function will add list items to the unordered list
        function updatePostList(){

            recentPostList.textContent = ''
            recentPosts.forEach(function(post, i){

               let postLi = document.createElement('li')
               postLi.textContent = `${post.user} said "${post.content}" at ${post.timePosted}`
               recentPostList.appendChild(postLi)

            }) 

        }

    </script>

</body>
</html>